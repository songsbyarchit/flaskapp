<!-- templates/create_ticket.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Ticket</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/styles.css">
</head>

<body>
    {% include 'menu2.html' %}

    <h1>Create Ticket</h1>

    <form method="POST" action="{{ url_for('create_ticket') }}">
        <br>
        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" name="fullName" required>
        <br>(NOTE: if you are writing about an issue someone<br>else is experiencing, please
        enter THEIR name.)
        <br><br>

        <label for="department">Department:</label>
        <select id="department" name="department" required>
            <option value="engineering">Engineering</option>
            <option value="marketing">Marketing</option>
            <option value="sales">Sales</option>
            <option value="cx">CX</option>
            <option value="tech-sales">Tech Sales</option>
            <option value="other">Other</option>
        </select>
        <br><br>

        <label for="theater">Theater:</label>
        <select id="theater" name="theater" onchange="updateCountries()" required>
            <option value="" disabled selected>- - -</option>
            <option value="emea">EMEA</option>
            <option value="apjc">APJC</option>
            <option value="na">NA</option>
        </select>
        <br><br>

        <label for="country">Country:</label>
        <select id="country" name="country" disabled required>
            <option value="" disabled selected>Please select a theater (above) before selecting a country</option>
            <!-- Options will be dynamically populated based on the selected theater -->
        </select>
        <br><br>

        <div id="phoneNumberSection">
            <label for="phoneNumber">The best phone number to reach me is:</label>
            <input type="text" id="phoneNumber" name="phoneNumber" required>
        </div>
        <br>

        <div id="emailSection">
            <label for="email">The best email address to reach me is:</label>
            <input type="text" id="email" name="email" required>
        </div>
        <br>

        <label for="bestMethod">I prefer to be reached by:</label>
        <select id="bestMethod" name="bestMethod">
            <option value="phoneCall">Phone Call</option>
            <option value="textMessage">Text Message</option>
            <option value="email">Email</option>
        </select>
        <br><br>

        <label for="severity">Severity of Issue:</label>
        <select id="severity" name="severity" required>
            <option value="1">1 - Slightly Impacting Role</option>
            <option value="2">2 - Somewhat Impacting Role</option>
            <option value="3">3 - Significantly Impacting Role</option>
            <option value="4">4 - Business Critical Issue</option>
            <option value="5">5 - Mission Critical Issue</option>
        </select>
        <br><br>

        <label for="technology">I am experiencing issues with:</label>
        <select id="technology" name="technology" required>
            <option value="aha">Aha!</option>
            <option value="ciscoCommerceWorkspace">Cisco Commerce Workspace (CCW)</option>
            <option value="ciscoUnifiedCommunicationsManager">Cisco Unified Communications Manager (CUCM)</option>
            <option value="concur">Concur</option>
            <option value="confluence">Confluence</option>
            <option value="googleAccountError">Google Account Error</option>
            <option value="macHardwareIssue">Mac Hardware Issue</option>
            <option value="okta">Okta</option>
            <option value="outlook">Outlook</option>
            <option value="salesforce">Salesforce</option>
            <option value="sharepoint">Sharepoint</option>
            <option value="teamspace">Teamspace</option>
            <option value="webex">Webex</option>
            <option value="windowsHardwareIssue">Windows Hardware Issue</option>
            <option value="workday">Workday</option>
            <option value="other">Other</option>
        </select>
        <br><br>


        <label for="description">The issue I'm experiencing is...</label>
        <br>
        <textarea id="description" name="description" rows="4" required></textarea>
        <br><br>

        <button type="submit">Create Ticket</button>
    </form>

    <!-- Optional: Add Bootstrap JS and jQuery for menu functionality -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        function updateCountries() {
            // Get the selected theater value
            var theater = document.getElementById("theater").value;

            // Get the country dropdown
            var countryDropdown = document.getElementById("country");

            // Enable the country dropdown
            countryDropdown.disabled = false;

            // Clear existing options
            countryDropdown.innerHTML = "";

            // Populate options based on the selected theater
            if (theater === "emea") {
                addOption(countryDropdown, "otherEmea", "Other (my country is not listed below)");
                addOption(countryDropdown, "austria", "Austria");
                addOption(countryDropdown, "bahrain", "Bahrain");
                addOption(countryDropdown, "belgium", "Belgium");
                addOption(countryDropdown, "denmark", "Denmark");
                addOption(countryDropdown, "egypt", "Egypt");
                addOption(countryDropdown, "finland", "Finland");
                addOption(countryDropdown, "france", "France");
                addOption(countryDropdown, "germany", "Germany");
                addOption(countryDropdown, "ghana", "Ghana");
                addOption(countryDropdown, "greece", "Greece");
                addOption(countryDropdown, "ireland", "Ireland");
                addOption(countryDropdown, "israel", "Israel");
                addOption(countryDropdown, "italy", "Italy");
                addOption(countryDropdown, "ivoryCoast", "Ivory Coast");
                addOption(countryDropdown, "jordan", "Jordan");
                addOption(countryDropdown, "kenya", "Kenya");
                addOption(countryDropdown, "kuwait", "Kuwait");
                addOption(countryDropdown, "lebanon", "Lebanon");
                addOption(countryDropdown, "morocco", "Morocco");
                addOption(countryDropdown, "netherlands", "Netherlands");
                addOption(countryDropdown, "nigeria", "Nigeria");
                addOption(countryDropdown, "norway", "Norway");
                addOption(countryDropdown, "oman", "Oman");
                addOption(countryDropdown, "portugal", "Portugal");
                addOption(countryDropdown, "qatar", "Qatar");
                addOption(countryDropdown, "saudiArabia", "Saudi Arabia");
                addOption(countryDropdown, "southAfrica", "South Africa");
                addOption(countryDropdown, "spain", "Spain");
                addOption(countryDropdown, "sweden", "Sweden");
                addOption(countryDropdown, "switzerland", "Switzerland");
                addOption(countryDropdown, "tunisia", "Tunisia");
                addOption(countryDropdown, "unitedArabEmirates", "United Arab Emirates");
                addOption(countryDropdown, "unitedKingdom", "United Kingdom");
                // Add more options as needed for EMEA
            } else if (theater === "apjc") {
                addOption(countryDropdown, "otherApjc", "Other (my country is not listed below)");
                addOption(countryDropdown, "australia", "Australia");
                addOption(countryDropdown, "bangladesh", "Bangladesh");
                addOption(countryDropdown, "bhutan", "Bhutan");
                addOption(countryDropdown, "cambodia", "Cambodia");
                addOption(countryDropdown, "china", "China");
                addOption(countryDropdown, "fiji", "Fiji");
                addOption(countryDropdown, "hongKong", "Hong Kong");
                addOption(countryDropdown, "india", "India");
                addOption(countryDropdown, "indonesia", "Indonesia");
                addOption(countryDropdown, "japan", "Japan");
                addOption(countryDropdown, "kiribati", "Kiribati");
                addOption(countryDropdown, "laos", "Laos");
                addOption(countryDropdown, "malaysia", "Malaysia");
                addOption(countryDropdown, "maldives", "Maldives");
                addOption(countryDropdown, "marshallIslands", "Marshall Islands");
                addOption(countryDropdown, "micronesia", "Micronesia");
                addOption(countryDropdown, "myanmar", "Myanmar");
                addOption(countryDropdown, "nepal", "Nepal");
                addOption(countryDropdown, "newZealand", "New Zealand");
                addOption(countryDropdown, "pakistan", "Pakistan");
                addOption(countryDropdown, "palau", "Palau");
                addOption(countryDropdown, "papuaNewGuinea", "Papua New Guinea");
                addOption(countryDropdown, "philippines", "Philippines");
                addOption(countryDropdown, "samoa", "Samoa");
                addOption(countryDropdown, "singapore", "Singapore");
                addOption(countryDropdown, "solomonIslands", "Solomon Islands");
                addOption(countryDropdown, "southKorea", "South Korea");
                addOption(countryDropdown, "sriLanka", "Sri Lanka");
                addOption(countryDropdown, "taiwan", "Taiwan");
                addOption(countryDropdown, "thailand", "Thailand");
                addOption(countryDropdown, "tonga", "Tonga");
                addOption(countryDropdown, "tuvalu", "Tuvalu");
                addOption(countryDropdown, "vanuatu", "Vanuatu");
                addOption(countryDropdown, "vietnam", "Vietnam");
                // Add more options as needed for APJC
            } else if (theater === "na") {
                addOption(countryDropdown, "otherNa", "Other (my country is not listed below)");
                addOption(countryDropdown, "bermuda", "Bermuda");
                addOption(countryDropdown, "canada", "Canada");
                addOption(countryDropdown, "greenland", "Greenland");
                addOption(countryDropdown, "mexico", "Mexico");
                addOption(countryDropdown, "saintPierreMiquelon", "Saint Pierre and Miquelon");
                addOption(countryDropdown, "unitedStates", "United States");
                // Add more options as needed for NA
            }
        }

        function addOption(selectElement, value, text) {
            var option = document.createElement("option");
            option.value = value;
            option.text = text;
            selectElement.add(option);
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var form = document.querySelector('form');

            form.addEventListener('submit', function (event) {
                // Get the phone number value
                var phoneNumberInput = document.getElementById('phoneNumber');
                var phoneNumber = phoneNumberInput.value;

                // Define a regular expression for a phone number pattern (10 or 11 digits)
                var phoneNumberPattern = /^\d{10,11}$/;

                // Check if the phone number matches the pattern
                if (!phoneNumberPattern.test(phoneNumber)) {
                    alert('Please enter a valid phone number.');
                    event.preventDefault(); // Prevent form submission
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var form = document.querySelector('form');

            form.addEventListener('submit', function (event) {
                // Get the email value
                var emailInput = document.getElementById('email');
                var email = emailInput.value;

                // Define a regular expression for email validation
                var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                // Check if the email matches the pattern
                if (!emailPattern.test(email)) {
                    alert('Please enter a valid email address.');
                    event.preventDefault(); // Prevent form submission
                }
            });
        });
    </script>

</body>

</html>